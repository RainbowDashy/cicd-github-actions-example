# This action should only be run on pull_request events.
# It will find the open issue created for the PR.
name: "Search Issue"
description: "Search the issue"
inputs:
  url:
    description: "The Bytebase URL. Example: https://bytebase.example.com"
    required: true
  token:
    description: "The API token obtained from bytebase/login action"
    required: true
  headers:
    description: 'JSON string of extra headers to include in the request. e.g Cloudflare Zero Trust headers {"CF-Access-Client-Id": "xxx", CF-Access-Client-Secret: "xxx"}'
  project-id:
    description: "The project ID. Example: example"
    required: true
  database:
    description: "The name of database. Example: instances/prod-instance/databases/example"
    required: true
  # Current search API can't search multi-word text precisely, so it needs to be a single word.
  title:
    description: "The issue title"
outputs:
  issues:
    description: "The issue list matching the search criteria"
runs:
  using: "node20"
  main: "dist/index.js"
